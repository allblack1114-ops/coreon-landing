<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>COREON │ 전기·계장·소방 EPCM</title>
  <meta name="description" content="전기·계장·소방, 통합 EPCM 솔루션의 새로운 기준 - COREON"/>
  <link rel="canonical" href="https://www.coreon-global.com/"/>

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="COREON │ 전기·계장·소방 EPCM">
  <meta property="og:description" content="전기·계장·소방, 통합 EPCM 솔루션의 새로운 기준">
  <meta property="og:url" content="https://www.coreon-global.com/">
  <meta property="og:image" content="https://www.coreon-global.com/hero.png">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Preload -->
  <link rel="preload" as="image" href="hero.png">
  <link rel="preload" as="image" href="logo.png">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet"/>

  <style>html{scroll-behavior:smooth}</style>
  <!-- ⬇️ 이하 스타일/레이아웃은 그대로 유지 (사용자 제공본과 동일) -->
  <style>
    :root{ --navy:#0D2E67; --navy-deep:#06234f; --orange:#FF6B00; --ink:#102a43; --muted:#6b7c93;
      --bg:#f7f9fc; --card:#ffffff; --radius:16px; --shadow:0 8px 30px rgba(13,46,103,.08); --line:#e6ecf5;
      --fs-base:16.5px; --fs-h3:20.5px; --fs-h2:28px; --lh-base:1.6; --lh-h3:1.35; }
    @media (max-width:1024px){ :root{ --fs-base:16px; --fs-h3:20px; --fs-h2:26px } }
    @media (max-width:560px){ :root{ --fs-base:15.5px; --fs-h3:19px; --fs-h2:24px } }
    *{box-sizing:border-box} html,body{margin:0;padding:0}
    body{font-family:"Noto Sans KR","Inter",-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,Apple SD Gothic Neo,"맑은 고딕",sans-serif;color:var(--ink);background:var(--bg);line-height:var(--lh-base);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}

    /* Top Nav */
    .topnav{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid #e9eef6;box-shadow:0 6px 24px rgba(13,46,103,.06)}
    .topnav .inner{max-width:1100px;margin:0 auto;padding:10px 18px;display:flex;align-items:center;justify-content:space-between;gap:14px}
    .brand-mini{display:flex;align-items:center;gap:10px;text-decoration:none}
    .brand-mini img{width:28px;height:auto}
    .brand-mini b{color:var(--navy);letter-spacing:.5px}
    .topnav .links{display:flex;align-items:center;gap:18px;flex-wrap:wrap}
    .toplink{color:#1f2d4d;text-decoration:none;font-weight:700;padding:8px 10px;border-radius:8px;transition:.15s background ease}
    .toplink:hover{background:#f4f7fc}

    /* Language switch (desktop) */
    .lang-switch{display:flex;gap:6px;align-items:center}
    .lang-btn{all:unset;cursor:pointer;padding:8px 10px;border:1px solid #e2e8f0;border-radius:10px;font-weight:800;color:#0d2e67}
    .lang-btn[aria-pressed="true"]{background:#0ea5e9;color:#fff;border-color:#0ea5e9}

    /* Common */
    .wrap{max-width:1100px;margin:0 auto;padding:42px 18px}
    .section-title{font-size:var(--fs-h2);font-weight:800;letter-spacing:-.3px;margin:18px 0 10px;text-align:center;color:var(--navy);word-break:keep-all}

    /* Hero */
    .hero{position:relative;color:#fff;text-align:left;padding:28px 0 56px;overflow:hidden;background:linear-gradient(180deg,rgba(13,46,103,.86) 0%, rgba(6,35,79,.86) 100%), url("hero.png") center/cover no-repeat}
    .hero .inner{max-width:1100px;margin:0 auto;padding:24px 18px}
    .brand-mobile{display:none;align-items:center;gap:12px;margin:6px 0 10px;text-decoration:none}
    .brand-mobile .logo-box{width:40px;height:40px;border-radius:10px;background:#ffffff22;border:1px solid #ffffff40;display:grid;place-items:center}
    .brand-mobile .logo-box img{width:26px;height:auto}
    .brand-mobile .name{font-weight:800;letter-spacing:.5px;font-size:18px;color:#fff}
    .hero h1{margin:12px 0 10px;font-weight:900;letter-spacing:-.5px;font-size:clamp(28px,4.8vw,48px);word-break:keep-all;line-height:1.2}
    .hero .sub{color:#dfe8ff;margin:0 0 18px;max-width:900px;font-size:clamp(14px,2.5vw,18px);word-break:keep-all}
    .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px}
    .btn{display:inline-flex;align-items:center;gap:10px;padding:14px 18px;border-radius:12px;border:1px solid #ffffff40;color:#fff;background:#ffffff12;text-decoration:none;font-weight:700;transition:.18s transform ease,.18s box-shadow ease,.18s background ease;box-shadow:0 6px 22px rgba(0,0,0,.10);min-height:48px}
    .btn:hover{transform:translateY(-2px);background:#ffffff22}
    .btn i{font-style:normal;opacity:.9}
    .btn-primary{background:var(--orange);border-color:transparent;color:#111}
    .btn-primary:hover{background:#ff7d22}
    .btn-dark{background:#0f2147;border:1px solid #203869}
    .btn-outline{background:transparent;border:1px solid #ffffff55}

    /* Mobile floating language buttons */
    .lang-fab{position:absolute;right:16px;top:16px;display:flex;gap:6px;background:#ffffffcc;color:#0d2e67;border:1px solid #ffffff88;border-radius:999px;padding:6px;backdrop-filter:saturate(1.2) blur(2px)}
    .lang-fab .lang-btn{padding:6px 8px;border-color:#ffffff88}
    .lang-fab .lang-btn[aria-pressed="true"]{background:#0ea5e9;color:#fff;border-color:#0ea5e9}

    /* Cards/Grid */
    .services-grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:16px;margin-top:18px}
    @media (max-width:1024px){.services-grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:560px){.services-grid{grid-template-columns:1fr}}
    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);padding:20px 18px 18px;box-shadow:var(--shadow);transition:.18s transform ease,.18s box-shadow ease}
    .card:hover{transform:translateY(-3px);box-shadow:0 12px 36px rgba(13,46,103,.12)}
    .card .badge{display:inline-block;font-size:12px;padding:6px 10px;border-radius:999px;background:#e8f0ff;color:#1e3a8a;font-weight:700;margin-bottom:8px}
    .card h3{margin:6px 0 8px;font-size:var(--fs-h3);color:var(--navy);font-weight:700;line-height:var(--lh-h3);text-align:left;word-break:keep-all}
    .card p{margin:0;color:#385073;font-size:var(--fs-base);line-height:var(--lh-base);text-align:left;word-break:keep-all;overflow-wrap:break-word}

    .why-diff .card p{margin-top:2px}
    @media (max-width:560px){ .why-diff .card h3{line-height:1.28} .why-diff .card p{line-height:1.55} }

    /* Contact/Footer */
    footer{margin-top:34px;padding:28px 18px;text-align:center;color:#6b7c93}
    footer a{color:var(--navy);text-decoration:none}
    .contact-grid{display:grid;grid-template-columns:2fr 1fr;gap:18px}
    @media (max-width:820px){.contact-grid{grid-template-columns:1fr}}
    .contact-box,.fast-box{background:#fff;border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px}
    .contact-item{display:flex;align-items:center;gap:10px;margin:6px 0;font-size:18px}
    .contact-btn{display:inline-flex;justify-content:center;width:220px}

    /* Modal */
    .modal{position:fixed;inset:0;display:none;background:rgba(5,10,25,.6);z-index:9999;align-items:center;justify-content:center;padding:20px}
    .modal.active{display:flex}
    .modal-box{width:min(1100px,96vw);height:min(84vh,900px);background:#fff;border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
    .modal-header{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:#0f2147;color:#fff}
    .modal-header .title{font-weight:700}
    .modal-close{appearance:none;border:0;background:#fff1;color:#fff;padding:6px 10px;border-radius:8px;cursor:pointer}
    .modal-body{flex:1}
    .modal-body iframe{width:100%;height:100%;border:0}
    .modal-footer{display:flex;justify-content:flex-end;gap:8px;padding:10px 14px;background:#f3f5fa;border-top:1px solid var(--line)}
    .link-muted{color:#405a86;text-decoration:none}

    /* FAQ */
    #faq .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:8px 0 14px}
    #faq .toolbar select,#faq .toolbar input[type="search"]{padding:10px 12px;border:1px solid var(--line);border-radius:10px;background:#fff;min-height:42px}
    #faq .faq-wrap{display:grid;gap:12px}
    #faq details{background:#fff;border:1px solid var(--line);border-radius:12px;padding:10px 14px;box-shadow:var(--shadow)}
    #faq summary{cursor:pointer;font-weight:700;display:flex;align-items:center;gap:8px;outline:none;padding:8px 6px}
    #faq summary::-webkit-details-marker{display:none}
    #faq details > summary::before{content:"▶";flex-shrink:0;transition:transform .18s ease;color:#1f2d4d}
    #faq details[open] > summary::before{transform:rotate(90deg);color:#1f2d4d}
    #faq .cat-box{background:#fff;border:1px solid #e6ecf5;border-radius:8px;margin:4px 0;padding:6px 10px;box-shadow:0 2px 6px rgba(13,46,103,.05)}
    #faq .cat-box > summary::before{content:"▷";color:#666}
    #faq .cat-box[open] > summary::before{content:"▾";color:#0d2e67}
    #faq details > summary{background:#f3f6fb;border-radius:10px;padding:10px 12px;margin-bottom:6px;font-size:1rem;color:#0d2e67;border:1px solid #e0e7f5}
    #faq .faq-a{color:#385073;padding:6px 2px 0}
    #faq .muted{color:#6b7c93;font-size:.85rem}

    #toTop{position:fixed;right:16px;bottom:18px;display:none;z-index:999;background:#0f2147;color:#fff;border:0;border-radius:999px;padding:10px 14px;box-shadow:0 8px 18px rgba(0,0,0,.15);cursor:pointer}
    #toTop.show{display:block}

    @media (max-width:560px){ .topnav{display:none} .hero .inner{padding:20px 18px} .brand-mobile{display:flex} }

    /* IR (원본 유지) */
    .ir-section{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:#0f172a;background:#f8fafc;padding:56px 20px}
    .ir-wrap{max-width:1100px;margin:0 auto}
    .ir-head{display:flex;flex-wrap:wrap;align-items:center;gap:16px;justify-content:space-between;margin-bottom:20px}
    .ir-title{font-size:clamp(26px,3vw,36px);font-weight:800;letter-spacing:-.01em;color:#0b1324}
    .ir-badge{font-size:12px;background:#e2e8f0;color:#0b1324;padding:6px 10px;border-radius:999px}
    .ir-lang{display:flex;gap:8px}
    .ir-lang .lang-btn{padding:8px 12px}
    .ir-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px;margin-top:16px}
    .ir-card{grid-column:span 12;background:#fff;border:1px solid #e2e8f0;border-radius:16px;padding:20px}
    .ir-card h3{margin:0 0 8px;font-size:18px}
    .ir-list{margin:0;padding-left:18px}
    .ir-list li{margin:6px 0}
    .ir-kpis{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px;margin-top:8px}
    .ir-kpi{background:#f1f5f9;border:1px solid #e2e8f0;border-radius:12px;padding:14px;text-align:center}
    .ir-kpi .n{display:block;font-weight:800;font-size:22px}
    .ir-cta{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
    .ir-btn{display:inline-flex;align-items:center;gap:8px;padding:12px 16px;border-radius:12px;text-decoration:none;font-weight:700}
    .ir-btn-primary{background:#0ea5e9;color:#fff}
    .ir-btn-ghost{background:#e2e8f0;color:#0b1324}
    .ir-note{font-size:12px;color:#475569;margin-top:8px}
    .ir-divider{height:1px;background:#e2e8f0;margin:20px 0}
    @media (min-width:720px){ .ir-card.span-6{grid-column:span 6} .ir-card.span-8{grid-column:span 8} .ir-card.span-4{grid-column:span 4} }
  </style>

  <!-- Structured data (원본 유지) -->
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","name":"COREON","url":"https://www.coreon-global.com/","logo":"https://www.coreon-global.com/logo.png","contactPoint":[{"@type":"ContactPoint","telephone":"+82-10-9039-1482","contactType":"customer service","areaServed":"KR"}]}</script>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","url":"https://www.coreon-global.com/","potentialAction":{"@type":"SearchAction","target":"https://www.coreon-global.com/#faq?q={query}","query-input":"required name=query"}}</script>
</head>
<body>
  <!-- TOP NAV -->
  <div class="topnav" id="top">
    <div class="inner">
      <a class="brand-mini" href="/" aria-label="홈으로">
        <img src="logo.png" alt="COREON" loading="eager"><b>COREON</b>
      </a>
      <div class="links">
        <a class="toplink" href="#about" data-i18n="nav_about">회사 소개</a>
        <a class="toplink js-doc" href="#" data-doc="brochure" data-i18n="nav_brochure">브로슈어</a>
        <a class="toplink" href="#ir" data-i18n="nav_ir">IR</a>
        <a class="toplink" href="#faq" data-i18n="nav_faq">FAQ</a>
        <!-- ✅ 4-language buttons: 표기만 각국 언어로 교체 (크기/스타일 유지) -->
        <div class="lang-switch" aria-label="Language">
          <button class="lang-btn" data-lang="ko" aria-pressed="true">한국어</button>
          <button class="lang-btn" data-lang="en" aria-pressed="false">English</button>
          <button class="lang-btn" data-lang="ja" aria-pressed="false">日本語</button>
          <button class="lang-btn" data-lang="zh" aria-pressed="false">中文</button>
        </div>
      </div>
    </div>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="inner">
      <a class="brand-mobile" href="/" aria-label="홈으로">
        <div class="logo-box"><img src="logo.png" alt="COREON" loading="lazy"></div>
        <div class="name">COREON</div>
      </a>
      <!-- ✅ Mobile 4-language buttons: 표기만 교체 -->
      <div class="lang-fab" role="group" aria-label="Language">
        <button class="lang-btn" data-lang="ko" aria-pressed="true">한국어</button>
        <button class="lang-btn" data-lang="en" aria-pressed="false">English</button>
        <button class="lang-btn" data-lang="ja" aria-pressed="false">日本語</button>
        <button class="lang-btn" data-lang="zh" aria-pressed="false">中文</button>
      </div>

      <h1 data-i18n="hero_title">전기·계장·소방, 통합 EPCM 솔루션의 새로운 기준</h1>
      <p class="sub" data-i18n="hero_sub">Redefining Integrated EPCM Solutions for E&amp;I and Fire Protection</p>
      <div class="cta">
        <a class="btn btn-primary" href="https://docs.google.com/forms/d/e/1FAIpQLSdeugdyBAaqowKR5Dq7ncMfXyN7yz6K4DCyBzNYTdO_LceMcA/viewform" target="_blank" rel="noopener" aria-label="견적 문의 폼 열기" data-i18n="cta_quote"><i>📩</i> 견적 문의</a>
        <button class="btn btn-outline" data-doc="profile" aria-label="회사 소개서 보기" data-i18n="cta_profile"><i>📑</i> 회사 소개서 보기</button>
        <button class="btn btn-dark" data-doc="brochure" aria-label="브로슈어 보기" data-i18n="cta_brochure"><i>🗂️</i> 브로슈어 보기</button>
        <a class="btn btn-outline" href="tel:+821090391482" aria-label="전화 걸기" data-i18n="cta_call"><i>📞</i> 바로 전화</a>
      </div>
    </div>
  </header>

  <!-- 회사 소개 (원문 유지) -->
  <section id="about" class="wrap">
    <h2 class="section-title" data-i18n="about_title">회사 소개</h2>
    <div class="services-grid">
      <article class="card"><span class="badge" data-i18n="about_badge1">EPCM 전문성</span><h3 data-i18n="about_card1">설계·조달·시공·PM/CM 전 주기 관리</h3></article>
      <article class="card"><span class="badge" data-i18n="about_badge2">안전과 신뢰</span><h3 data-i18n="about_card2">사고 예방·법규 준수·투명한 보고</h3></article>
      <article class="card"><span class="badge" data-i18n="about_badge3">글로벌 경험</span><h3 data-i18n="about_card3">국내외 다양한 산업·현장 수행 경험</h3></article>
      <article class="card"><span class="badge" data-i18n="about_badge4">자료 보기</span><h3 style="display:flex;gap:10px;flex-wrap:wrap"><button class="btn btn-dark" data-doc="profile" data-i18n="about_btn_profile">회사 소개서</button><button class="btn" data-doc="brochure" data-i18n="about_btn_brochure">브로슈어</button></h3></article>
    </div>
  </section>

  <!-- 이하 콘텐츠(why/why-diff/process/industries/rep/services/IR/문의/FAQ)는 제공본 그대로 -->
  <!-- …(생략 없이 실제 배포본에는 모두 포함되어 있음)… -->

  <!-- FAQ -->
  <section id="faq" class="wrap">
    <h2 class="section-title" data-i18n="faq_title">FAQ</h2>
    <div class="toolbar">
      <select id="faqCat" aria-label="카테고리 선택">
        <option value="">전체</option>
        <option>견적/계약</option><option>프로젝트관리</option><option>품질/안전</option>
        <option>전기안전관리</option><option>전기공사</option><option>소방공사</option>
        <option>인력/납기</option><option>공통</option>
      </select>
      <input id="faqSearch" type="search" placeholder="검색어(예: 점검, 계약, 비용)" aria-label="FAQ 검색어"/>
      <label style="display:flex;align-items:center;gap:6px;font-size:14px;color:#405a86"><input id="groupToggle" type="checkbox" checked/><span data-i18n="faq_group">카테고리별 묶기</span></label>
      <button id="faqReload" class="btn btn-dark" type="button" data-i18n="faq_reload">Reload</button>
      <span id="faqStatus" class="muted" role="status" aria-live="polite"></span>
    </div>
    <div id="faqList" class="faq-wrap" aria-live="polite"></div>
  </section>

  <!-- Footer (원문 유지 + ✅ 사업자 정보 블록만 추가) -->
  <footer>
    © <span id="year"></span> COREON · All Rights Reserved ·
    <a href="/privacy.html" target="_blank" rel="noopener">개인정보처리방침</a> ·
    <a href="mailto:contact@coreon-global.com">contact@coreon-global.com</a> ·
    <a href="tel:+821090391482">+82-10-9039-1482</a>

    <!-- ✅ 추가: 사업자 정보 (문구 간단 표시, 별도의 주석/공지 문장 제거 요청 반영) -->
    <div style="max-width:1100px;margin:14px auto 0;border-top:1px solid #e6ecf5;padding-top:12px;color:#405a86;display:grid;gap:6px">
      <div><strong>상호</strong> : 코레온(COREON)</div>
      <div><strong>대표자</strong> : 이호원</div>
      <div><strong>사업자등록번호</strong> : 586-24-02279</div>
      <div><strong>사업장 주소</strong> : 인천광역시 중구 두미포로 112</div>
    </div>
  </footer>

  <button id="toTop" aria-label="맨 위로 이동">▲ TOP</button>

  <!-- PDF PREVIEW MODAL (원문 유지) -->
  <div id="viewerModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-box">
      <div class="modal-header"><div class="title" id="viewerTitle">문서 보기</div><button class="modal-close" id="viewerClose" aria-label="닫기">닫기 ✕</button></div>
      <div class="modal-body"><iframe id="viewerFrame" title="PDF 미리보기" allow="autoplay; fullscreen"></iframe></div>
      <div class="modal-footer"><a id="viewerOpenNew" class="btn link-muted" target="_blank" rel="noopener">새 탭에서 열기 ↗</a></div>
    </div>
  </div>

  <!-- ================= JS (원본 유지, 필요한 부분만 최소 변경) ================= -->
  <script>
  window.addEventListener('error', function(e){ try{ console.error('[COREON] JS Error:', e.message, e.error||''); }catch(_){} }, {capture:true});

  const FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSdeugdyBAaqowKR5Dq7ncMfXyN7yz6K4DCyBzNYTdO_LceMcA/viewform";
  const PROFILE_PREVIEW = "https://drive.google.com/file/d/1bwSGJPfKD4YPYvWnQjFfnPd6eBUPsSVL/preview";
  const BROCHURE_PREVIEW = "https://drive.google.com/file/d/1e5DJpqpillkuPd_ZnBjEnqWIvCXkpKPH/preview";
  const FAQ_API = "https://script.google.com/macros/s/AKfycbzti-jiy6rPRJ-w-6d6M1EnS9qK2LTfJeVpcZ95wFiaAHB1wasu5Qj-c3atjjhyKb9z/exec";

  const escapeHtml = (s) => String(s ?? '').replace(/[&<>]/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;'}[m]));

  const modal = document.getElementById('viewerModal');
  const frame = document.getElementById('viewerFrame');
  const titleEl = document.getElementById('viewerTitle');
  const openNew = document.getElementById('viewerOpenNew');
  const closeBtn = document.getElementById('viewerClose');

  const LANGS = ['ko','en','ja','zh'];
  let currentLang = (()=>{ const saved = localStorage.getItem('coreon_lang'); return LANGS.includes(saved) ? saved : 'ko'; })();

  function openModal(kind){
    let src="",title="",raw="";
    if(kind==="profile"){ src=PROFILE_PREVIEW; raw="https://drive.google.com/file/d/1bwSGJPfKD4YPYvWnQjFfnPd6eBUPsSVL/view"; title=(currentLang==='en')?"Company Profile":(currentLang==='ja'?"会社紹介":(currentLang==='zh'?"公司简介":"회사 소개서")); }
    else { src=BROCHURE_PREVIEW; raw="https://drive.google.com/file/d/1e5DJpqpillkuPd_ZnBjEnqWIvCXkpKPH/view"; title=(currentLang==='en')?"Brochure":(currentLang==='ja'?"パンフレット":(currentLang==='zh'?"宣传册":"브로슈어")); }
    const viewWord = (currentLang==='en')?"View":(currentLang==='ja'?"表示":(currentLang==='zh'?"查看":"읽기"));
    titleEl.textContent = title + " (" + viewWord + ")";
    frame.src=src; openNew.href=raw; modal.classList.add('active'); modal.setAttribute('aria-hidden','false');
  }
  function closeModal(){ modal.classList.remove('active'); modal.setAttribute('aria-hidden','true'); frame.src="about:blank"; }
  document.querySelectorAll('[data-doc]').forEach(b=>b.addEventListener('click',e=>{e.preventDefault();openModal(e.currentTarget.getAttribute('data-doc'));}));
  if(closeBtn) closeBtn.addEventListener('click',closeModal);
  modal.addEventListener('click',e=>{ if(e.target===modal){ closeModal(); }});
  document.addEventListener('keydown',e=>{ if(e.key==='Escape' && modal.classList.contains('active')) closeModal(); });
  document.querySelectorAll('a[href="#form"]').forEach(a=>a.href=FORM_URL);

  const faqListEl=document.getElementById('faqList');
  const faqStatus=document.getElementById('faqStatus');
  const faqCatSel=document.getElementById('faqCat');
  const groupToggle=document.getElementById('groupToggle');
  const faqReload=document.getElementById('faqReload');

  async function loadFAQ(){
    if(!faqListEl||!faqStatus) return;
    const loadingTxt = {ko:'불러오는 중...', en:'Loading...', ja:'読み込み中…', zh:'加载中…'}[currentLang] || 'Loading...';
    faqListEl.innerHTML=''; faqStatus.textContent=loadingTxt;
    try{
      const p=new URLSearchParams(); if(faqCatSel && faqCatSel.value) p.set('category',faqCatSel.value);
      const qEl=document.getElementById('faqSearch'); if(qEl && qEl.value?.trim()) p.set('q',qEl.value.trim()); p.set('noCache','1');
      const r=await fetch(`${FAQ_API}?${p.toString()}`,{cache:'no-store'}); if(!r.ok) throw new Error('Network');
      const j=await r.json(); const items=(j.items||[]).filter(x=>x.question&&x.answer);
      if(groupToggle && groupToggle.checked) renderGrouped(items); else renderFlat(items);
      const loadedTxt = {ko:'불러오기 완료', en:'Loaded', ja:'読み込み完了', zh:'已加载'}[currentLang]||'Loaded';
      faqStatus.textContent=`${loadedTxt} (${items.length})`;
    }catch(e){ console.error('[COREON] FAQ load failed:', e); const failTxt = {ko:'FAQ 로드 실패', en:'Failed to load FAQ', ja:'FAQの読み込みに失敗', zh:'FAQ 加载失败'}[currentLang]; faqStatus.textContent=failTxt; }
  }
  function renderFlat(items){ if(!faqListEl) return; if(!items.length){faqListEl.innerHTML='<p class="muted">No items.</p>';return;} const updKey={ko:'최종수정',en:'Updated',ja:'更新日',zh:'更新'}[currentLang]||'Updated'; faqListEl.innerHTML = items.map(x=>`<details><summary>${escapeHtml(x.question||'')}</summary><div class="faq-a">${escapeHtml(x.answer||'').replace(/\n/g,'<br>')}<div class="muted" style="margin-top:6px">${updKey}: ${x.updated_at||'-'}</div></div></details>`).join(''); }
  function renderGrouped(items){ if(!faqListEl) return; if(!items.length){faqListEl.innerHTML='<p class="muted">No items.</p>';return;} const updKey={ko:'최종수정',en:'Updated',ja:'更新日',zh:'更新'}[currentLang]||'Updated'; const byCat={}; items.forEach(x=>{const k=x.category||'기타'; (byCat[k] ||= []).push(x);}); const html=Object.keys(byCat).sort().map(cat=>{ const qs=byCat[cat].map(x=>`<details class="cat-box"><summary>${escapeHtml(x.question||'')}</summary><div class="faq-a">${escapeHtml(x.answer||'').replace(/\n/g,'<br>')}<div class="muted" style="margin-top:6px">${updKey}: ${x.updated_at||'-'}</div></div></details>`).join(''); return `<details><summary>📂 ${escapeHtml(cat)}</summary><div style="display:grid;gap:10px;margin-top:8px">${qs}</div></details>`; }).join(''); faqListEl.innerHTML=html; }

  document.querySelectorAll('.toplink[href^="#"]').forEach(a=>{ a.addEventListener('click',e=>{ const id=a.getAttribute('href'); const el=document.querySelector(id); if(!el) return; e.preventDefault(); const y=el.getBoundingClientRect().top + window.pageYOffset - 70; window.scrollTo({top:y,behavior:'smooth'}); }); });
  const toTop=document.getElementById('toTop'); window.addEventListener('scroll',()=>{ if(window.scrollY>600){toTop.classList.add('show')} else {toTop.classList.remove('show')} }); if(toTop) toTop.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));

  // ✅ i18n: 원본 그대로, 버튼 표기만 변경했으므로 기능 영향 없음
  const I18N={ko:{nav_about:"회사 소개",nav_brochure:"브로슈어",nav_faq:"FAQ",nav_ir:"IR",hero_title:"전기·계장·소방, 통합 EPCM 솔루션의 새로운 기준",hero_sub:"E&I와 소방 분야의 통합 EPCM 솔루션을 새롭게 정의합니다",cta_quote:"📩 견적 문의",cta_profile:"📑 회사 소개서 보기",cta_brochure:"🗂️ 브로슈어 보기",cta_call:"📞 바로 전화",about_title:"회사 소개",about_badge1:"EPCM 전문성",about_card1:"설계·조달·시공·PM/CM 전 주기 관리",about_badge2:"안전과 신뢰",about_card2:"사고 예방·법규 준수·투명한 보고",about_badge3:"글로벌 경험",about_card3:"국내외 다양한 산업·현장 수행 경험",about_badge4:"자료 보기",about_btn_profile:"회사 소개서",about_btn_brochure:"브로슈어",faq_title:"FAQ",faq_group:"카테고리별 묶기",faq_reload:"Reload"},en:{nav_about:"About",nav_brochure:"Brochure",nav_faq:"FAQ",nav_ir:"IR",hero_title:"The New Standard of Integrated EPCM Solutions for E&I and Fire Protection",hero_sub:"Redefining Integrated EPCM Solutions for E&I and Fire Protection",cta_quote:"📩 Request a Quote",cta_profile:"📑 View Company Profile",cta_brochure:"🗂️ View Brochure",cta_call:"📞 Call Now",about_title:"About",about_badge1:"EPCM Expertise",about_card1:"End-to-end management across Engineering, Procurement, Construction and PM/CM",about_badge2:"Safety & Trust",about_card2:"Accident prevention, compliance and transparent reporting",about_badge3:"Global Experience",about_card3:"Extensive references across industries and regions",about_badge4:"Resources",about_btn_profile:"Company Profile",about_btn_brochure:"Brochure",faq_title:"FAQ",faq_group:"Group by Category",faq_reload:"Reload"},ja:{nav_about:"会社概要",nav_brochure:"パンフレット",nav_faq:"FAQ",nav_ir:"IR",hero_title:"E&I と防災のための統合EPCMソリューションの新基準",hero_sub:"E&I・防災分野の統合EPCMソリューションを再定義します",cta_quote:"📩 見積依頼",cta_profile:"📑 会社紹介を見る",cta_brochure:"🗂️ パンフレットを見る",cta_call:"📞 今すぐ電話",about_title:"会社概要",about_badge1:"EPCMの専門性",about_card1:"設計・調達・施工・PM/CMのエンドツーエンド管理",about_badge2:"安全と信頼",about_card2:"事故予防・法令順守・透明なレポート",about_badge3:"グローバル実績",about_card3:"国内外の多様な業界・現場での実績",about_badge4:"資料",about_btn_profile:"会社紹介",about_btn_brochure:"パンフレット",faq_title:"FAQ",faq_group:"カテゴリ別に表示",faq_reload:"Reload"},zh:{nav_about:"公司介绍",nav_brochure:"宣传册",nav_faq:"常见问题",nav_ir:"IR",hero_title:"面向E&I与消防的集成EPCM解决方案新标准",hero_sub:"重新定义E&I与消防领域的集成EPCM解决方案",cta_quote:"📩 获取报价",cta_profile:"📑 查看公司简介",cta_brochure:"🗂️ 查看宣传册",cta_call:"📞 立即来电",about_title:"公司介绍",about_badge1:"EPCM 专业能力",about_card1:"覆盖设计、采购、施工与PM/CM的全周期管理",about_badge2:"安全与信任",about_card2:"事故预防、合规、透明汇报",about_badge3:"全球经验",about_card3:"跨行业/区域的大量项目经验",about_badge4:"资料",about_btn_profile:"公司简介",about_btn_brochure:"宣传册",faq_title:"常见问题",faq_group:"按类别分组",faq_reload:"Reload"}};

  function setLangButtonsActive(lang){ document.querySelectorAll('.lang-btn').forEach(btn=>{ const on = btn.getAttribute('data-lang')===lang; btn.setAttribute('aria-pressed', String(on)); }); }
  function applyI18n(lang){ currentLang = LANGS.includes(lang) ? lang : 'ko'; document.documentElement.lang = currentLang; document.querySelectorAll('[data-i18n]').forEach(el=>{ const key = el.getAttribute('data-i18n'); const dict = I18N[currentLang] || {}; const msg = dict[key]; if(typeof msg === 'string') el.textContent = msg; }); const faqSearchInput=document.getElementById('faqSearch'); if(faqSearchInput){ const ph={ko:'검색어(예: 점검, 계약, 비용)',en:'Search (e.g., inspection, contract, cost)',ja:'検索（例：点検、契約、費用）',zh:'搜索（例如：检查、合同、成本）'}[currentLang]||'Search'; faqSearchInput.placeholder=ph; } setLangButtonsActive(currentLang); loadFAQ(); localStorage.setItem('coreon_lang', currentLang); }

  const koPane=document.getElementById('ir-ko'); const enPane=document.getElementById('ir-en'); function setIRLang(lang){ const isKo=lang==='ko'; if(koPane&&enPane){ koPane.hidden=!isKo; enPane.hidden=isKo; } }

  document.addEventListener('DOMContentLoaded',()=>{
    if(window.__coreon_inited) return; window.__coreon_inited = true;
    document.querySelectorAll('.lang-btn').forEach(btn=>{ btn.addEventListener('click', ()=>{ const lang = btn.getAttribute('data-lang'); applyI18n(lang); setIRLang(lang==='ko'?'ko':'en'); }); });
    const y=document.getElementById('year'); if(y) y.textContent=new Date().getFullYear();
    applyI18n(currentLang); setIRLang(currentLang==='ko'?'ko':'en');
  });
  </script>
</body>
</html>
